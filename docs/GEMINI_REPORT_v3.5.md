# Smart Store Agent v3.5 - Gemini ê²€í† ìš© ì¢…í•© ë³´ê³ ì„œ

> **ì‘ì„±ì¼**: 2026-01-22
> **ì‘ì„±ì**: Claude Code CLI
> **GitHub**: https://github.com/hyunwoooim-star/smart-store-agent
> **ë¸Œëœì¹˜**: claude/scrape-progress-data-oFba0

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 ëª©í‘œ
**"í‹ˆìƒˆ ì‹œì¥ ë°œêµ´ â†’ ì†Œì‹± ê²€ì¦ â†’ ì½˜í…ì¸  ìƒì„±" ìë™í™”**

ë„¤ì´ë²„ ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ ìš´ì˜ìë¥¼ ìœ„í•œ AI ê¸°ë°˜ ì†Œì‹± ì˜ì‚¬ê²°ì • ì§€ì› ì‹œìŠ¤í…œ

### 1.2 í•µì‹¬ ê°€ì¹˜
- **"ì‚¬ì¥ë‹˜ì˜ ëˆì„ ì§€í‚¤ëŠ”"** ë³´ìˆ˜ì  ë¶„ì„
- ë§í•˜ëŠ” ìƒí’ˆì„ **ì‚¬ì „ì— ê±¸ëŸ¬ë‚´ëŠ”** ë¦¬ìŠ¤í¬ í•„í„°
- ìˆ˜ë™ ì‘ì—… ìµœì†Œí™”, **ìë™í™” íŒŒì´í”„ë¼ì¸** êµ¬ì¶•

---

## 2. Phase ì§„í–‰ í˜„í™© (v3.5)

| Phase | ë‚´ìš© | ìƒíƒœ | ì™„ë£Œì¼ |
|-------|------|------|--------|
| **Phase 1** | í•µì‹¬ ì—”ì§„ (ë§ˆì§„ ê³„ì‚°, í‚¤ì›Œë“œ í•„í„° ë“±) | âœ… ì™„ë£Œ | 01-19 |
| **Phase 1.5** | í†µí•© í…ŒìŠ¤íŠ¸ | âœ… ì™„ë£Œ | 01-20 |
| **Phase 2** | Streamlit ëŒ€ì‹œë³´ë“œ | âœ… ì™„ë£Œ | 01-20 |
| **Phase 3** | browser-use (WSL ì‹¤íŒ¨) | âŒ íê¸° | 01-20 |
| **Phase 3.5** | Playwright + Gemini (WSL ì‹¤íŒ¨) | âŒ íê¸° | 01-21 |
| **Phase 3.5** | **Apify API ì „í™˜** | âœ… **ì™„ë£Œ** | 01-22 |
| **Phase 4** | **Pre-Flight Check** | âœ… **ì™„ë£Œ** | 01-22 |
| **Phase 5** | ë¹„ì¦ˆë‹ˆìŠ¤ í™•ì¥ | â³ ì˜ˆì • | - |

---

## 3. Phase 3.5 ìƒì„¸: 1688 ìŠ¤í¬ë˜í•‘ ì „ëµ ë³€ê²½

### 3.1 ë¬¸ì œ ìƒí™©
WSL í™˜ê²½ì—ì„œ ë¸Œë¼ìš°ì € ê¸°ë°˜ ìŠ¤í¬ë˜í•‘ ì‹¤íŒ¨

| ì‹œë„ | ë°©ì‹ | ê²°ê³¼ | ì›ì¸ |
|------|------|------|------|
| 1ì°¨ | browser-use | âŒ ì‹¤íŒ¨ | 30ì´ˆ íƒ€ì„ì•„ì›ƒ (ë‚´ë¶€ ì´ë²¤íŠ¸ ë²„ìŠ¤) |
| 2ì°¨ | Playwright + Gemini Vision | âŒ ì‹¤íŒ¨ | Page crashed (ë©”ëª¨ë¦¬ ë¶€ì¡±) |
| **3ì°¨** | **Apify API** | âœ… **ì„±ê³µ** | í´ë¼ìš°ë“œ ìŠ¤í¬ë˜í•‘, ë¡œì»¬ ë¦¬ì†ŒìŠ¤ 0% |

### 3.2 Apify ì „í™˜ ê²°ì • ì´ìœ 

**Gemini í”¼ë“œë°± ë°˜ì˜:**
> "WSL í™˜ê²½ì—ì„œ ë¬´ê±°ìš´ ë¸Œë¼ìš°ì €ë¥¼ ì§ì ‘ ë„ìš°ê³ , 1688ì˜ ì•ˆí‹°ë´‡ê³¼ ì‹¸ìš°ëŠ” ê²ƒì€ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„"

| í•­ëª© | ì§ì ‘ ìŠ¤í¬ë˜í•‘ | Apify API |
|------|--------------|-----------|
| WSL í˜¸í™˜ì„± | âŒ ë¶ˆì•ˆì • | âœ… ë¬¸ì œ ì—†ìŒ |
| Anti-bot ìš°íšŒ | ì§ì ‘ ì²˜ë¦¬ | Apifyê°€ ì²˜ë¦¬ |
| ë¡œì»¬ ë¦¬ì†ŒìŠ¤ | ë†’ìŒ (ë¸Œë¼ìš°ì €) | 0% |
| ìœ ì§€ë³´ìˆ˜ | ë†’ìŒ | ë‚®ìŒ |
| ë¹„ìš© | ë¬´ë£Œ | $0~$50/ì›” |

### 3.3 êµ¬í˜„ ë‚´ìš©

**ë³€ê²½ëœ íŒŒì¼:**

1. `src/adapters/alibaba_scraper.py` - ì „ë©´ ì¬ì‘ì„±
   - Playwright ì½”ë“œ ì œê±°
   - Apify Client ê¸°ë°˜ìœ¼ë¡œ êµì²´
   - Mock ìŠ¤í¬ë˜í¼ í¬í•¨ (í…ŒìŠ¤íŠ¸ìš©)

2. `test_browser.py` - ë‹¨ìˆœí™”
   - ë¸Œë¼ìš°ì € ì˜µì…˜ ì œê±°
   - API ì „ìš© í…ŒìŠ¤íŠ¸ CLI

3. `requirements.txt` - ì˜ì¡´ì„± ì •ë¦¬
   - playwright, browser-use ì œê±°
   - apify-client ì¶”ê°€

4. `.env.example` - í™˜ê²½ë³€ìˆ˜ ì¶”ê°€
   - APIFY_API_TOKEN í•„ë“œ ì¶”ê°€

### 3.4 ì½”ë“œ ì˜ˆì‹œ

```python
from src.adapters.alibaba_scraper import scrape_1688

# ì‹¤ì œ ìŠ¤í¬ë˜í•‘ (Apify API)
product = await scrape_1688("https://detail.1688.com/offer/xxx.html")

# Mock í…ŒìŠ¤íŠ¸ (API í‚¤ ì—†ì´)
product = await scrape_1688("mock", use_mock=True)

print(product.name)       # ìƒí’ˆëª… (ì¤‘êµ­ì–´)
print(product.price_cny)  # ê°€ê²© (ìœ„ì•ˆ, ë²”ìœ„ë©´ ìµœëŒ€ê°’)
print(product.weight_kg)  # ë¬´ê²Œ (ì—†ìœ¼ë©´ None)
print(product.moq)        # MOQ
```

### 3.5 ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (Gemini í”¼ë“œë°± ë°˜ì˜)

| ê·œì¹™ | êµ¬í˜„ |
|------|------|
| ê°€ê²© ë²”ìœ„ â†’ ìµœëŒ€ê°’ ì„ íƒ | `_extract_max_price()` |
| ë¬´ê²Œ/ì‚¬ì´ì¦ˆ ì—†ìœ¼ë©´ None | ì„ì˜ ìƒì„± ê¸ˆì§€ |
| ìƒí’ˆëª… ì¤‘êµ­ì–´ ê·¸ëŒ€ë¡œ | ë²ˆì—­ ì—†ì´ ì €ì¥ |

---

## 4. Phase 4 ìƒì„¸: Pre-Flight Check

### 4.1 ëª©ì 
ìƒí’ˆ ë“±ë¡ ì „ **ë„¤ì´ë²„ ê¸ˆì§€ì–´/ìœ„í—˜ í‘œí˜„ ì‚¬ì „ ê²€ì‚¬**

### 4.2 ê²€ì‚¬ í•­ëª©

| ìœ í˜• | ì‹¬ê°ë„ | ì˜ˆì‹œ |
|------|--------|------|
| ì˜ë£Œ/ê±´ê°• íš¨ëŠ¥ | ğŸ”´ HIGH | "ì•” ì˜ˆë°©", "ë‹¹ë‡¨ ê°œì„ ", "ë©´ì—­ë ¥ ê°•í™”" |
| íš¨ê³¼ ë³´ì¥ | ğŸ”´ HIGH | "100% íš¨ê³¼", "ë¬´ì¡°ê±´ ì„±ê³µ" |
| ë„¤ì´ë²„ ê¸ˆì§€ì–´ | ğŸ”´ HIGH | "ì¹´ì¹´ì˜¤í†¡", "ì¿ íŒ¡", "ì§ê±°ë˜" |
| ìµœìƒê¸‰ í‘œí˜„ | ğŸŸ¡ MEDIUM | "ìµœê³ ", "ìµœì´ˆ", "1ìœ„", "ì™„ë²½" |
| ë¹„êµ ê´‘ê³  | ğŸŸ¡ MEDIUM | "íƒ€ì‚¬ ëŒ€ë¹„", "ê²½ìŸì‚¬ë³´ë‹¤" |
| ê°€ê²© ì¡°ì‘ | ğŸŸ¡ MEDIUM | "ì •ê°€ ëŒ€ë¹„ í• ì¸" |
| ìƒí‘œê¶Œ ì¹¨í•´ | ğŸŸ¡ MEDIUM | "ìƒ¤ë„¬ ìŠ¤íƒ€ì¼", "ë‚˜ì´í‚¤ ëŠë‚Œ" |

### 4.3 êµ¬í˜„ ë‚´ìš©

**íŒŒì¼:** `src/analyzers/preflight_check.py`

```python
from src.analyzers.preflight_check import PreFlightChecker

checker = PreFlightChecker(strict_mode=True)
result = checker.check("ìµœê³ ì˜ ë‹¤ì´ì–´íŠ¸ íš¨ê³¼! ì•” ì˜ˆë°©ì— íƒì›”!")

if not result.passed:
    print(f"ì˜¤ë¥˜ {result.error_count}ê±´, ê²½ê³  {result.warning_count}ê±´")
    for v in result.violations:
        print(f"[{v.severity}] {v.type.value}: '{v.matched_text}'")
        print(f"  â†’ ì œì•ˆ: {v.suggestion}")
```

### 4.4 ì•ˆì „í•œ ëŒ€ì•ˆ ì œì‹œ

| ìœ„ë°˜ í‘œí˜„ | ëŒ€ì•ˆ |
|----------|------|
| "ìµœê³ ì˜" | í”„ë¦¬ë¯¸ì—„, ê³ í’ˆì§ˆ, ì¸ê¸° ìƒí’ˆ |
| "ì•” ì˜ˆë°©" | ê±´ê°•í•œ ìƒí™œ ë„ì›€, ìì—° ìœ ë˜ ì„±ë¶„ |
| "100% íš¨ê³¼" | ë§Œì¡±ë„ ë†’ì€, í˜¸í‰ë°›ëŠ”, ê²€ì¦ëœ í’ˆì§ˆ |

---

## 5. Streamlit ëŒ€ì‹œë³´ë“œ (v3.5)

### 5.1 íƒ­ êµ¬ì„±

| íƒ­ | ê¸°ëŠ¥ | ìƒíƒœ |
|----|------|------|
| **ë§ˆì§„ ë¶„ì„** | ìƒí’ˆ ì •ë³´ ì…ë ¥ â†’ ë¦¬ìŠ¤í¬ ë¶„ì„ | âœ… |
| **1688 ìŠ¤í¬ë˜í•‘** | URL â†’ Apifyë¡œ ìƒí’ˆ ì •ë³´ ì¶”ì¶œ | âœ… NEW |
| **Pre-Flight Check** | ê¸ˆì§€ì–´/ìœ„í—˜ í‘œí˜„ ê²€ì‚¬ | âœ… NEW |

### 5.2 ì‹¤í–‰ ë°©ë²•

```bash
streamlit run src/ui/app.py
```

### 5.3 ìŠ¤í¬ë¦°ìƒ· (ì˜ˆìƒ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›¡ï¸ Smart Store Agent v3.5                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ë§ˆì§„ ë¶„ì„ â”‚ ğŸ‡¨ğŸ‡³ 1688     â”‚ âœ… Pre-Flight Check  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  [í˜„ì¬ ì„ íƒëœ íƒ­ ë‚´ìš©]                              â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ê¸°ìˆ  ìŠ¤íƒ (v3.5)

| ì˜ì—­ | ê¸°ìˆ  | ë¹„ê³  |
|------|------|------|
| ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ | Claude Code CLI | AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸ |
| AI ë¶„ì„ | Gemini 1.5 Flash | ìƒí’ˆ ë¶„ì„, ì¹´í”¼ë¼ì´íŒ… |
| 1688 ìŠ¤í¬ë˜í•‘ | **Apify API** | í´ë¼ìš°ë“œ ìŠ¤í¬ë˜í•‘ |
| ì–¸ì–´ | Python 3.11+ | íƒ€ì… íŒíŠ¸ í•„ìˆ˜ |
| ë°ì´í„°ë² ì´ìŠ¤ | Supabase | PostgreSQL + RLS |
| UI | Streamlit | íƒ­ ê¸°ë°˜ ëŒ€ì‹œë³´ë“œ |

---

## 7. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
smart-store-agent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ adapters/
â”‚   â”‚   â””â”€â”€ alibaba_scraper.py    # 1688 ìŠ¤í¬ë˜í¼ (Apify)
â”‚   â”œâ”€â”€ analyzers/
â”‚   â”‚   â”œâ”€â”€ gemini_analyzer.py    # Gemini ë¶„ì„
â”‚   â”‚   â”œâ”€â”€ keyword_filter.py     # í‚¤ì›Œë“œ í•„í„°
â”‚   â”‚   â”œâ”€â”€ preflight_check.py    # Pre-Flight Check â† NEW
â”‚   â”‚   â””â”€â”€ spec_validator.py     # ìŠ¤í™ ê²€ì¦
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”œâ”€â”€ logic.py              # LandedCostCalculator
â”‚   â”‚   â””â”€â”€ models.py             # ë„ë©”ì¸ ëª¨ë¸
â”‚   â”œâ”€â”€ sourcing/
â”‚   â”‚   â””â”€â”€ margin_calculator.py  # ë§ˆì§„ ê³„ì‚°
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ app.py                # Streamlit ëŒ€ì‹œë³´ë“œ
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ CURRENT_STATUS.md
â”‚   â”œâ”€â”€ ROADMAP.md
â”‚   â””â”€â”€ GEMINI_REPORT_v3.5.md     # â† ì´ ë¬¸ì„œ
â”œâ”€â”€ test_browser.py               # ìŠ¤í¬ë˜í¼ í…ŒìŠ¤íŠ¸ CLI
â”œâ”€â”€ CLAUDE.md                     # í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸
â”œâ”€â”€ requirements.txt
â””â”€â”€ .env.example
```

---

## 8. í™˜ê²½ ì„¤ì •

### 8.1 í•„ìˆ˜ í™˜ê²½ë³€ìˆ˜

```ini
# .env íŒŒì¼
APIFY_API_TOKEN=apify_api_xxxxxxxxx   # 1688 ìŠ¤í¬ë˜í•‘
GOOGLE_API_KEY=your_google_api_key     # Gemini ë¶„ì„
SUPABASE_URL=https://xxx.supabase.co   # ë°ì´í„°ë² ì´ìŠ¤
SUPABASE_KEY=your_key
```

### 8.2 ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install -r requirements.txt
```

ì£¼ìš” íŒ¨í‚¤ì§€:
- `apify-client>=1.6.0` - Apify API
- `streamlit>=1.30.0` - ëŒ€ì‹œë³´ë“œ
- `google-generativeai>=0.3.0` - Gemini
- `supabase>=2.0.0` - ë°ì´í„°ë² ì´ìŠ¤

---

## 9. Geminiì—ê²Œ ì§ˆë¬¸

### Q1. Pre-Flight Check íŒ¨í„´ ë³´ì™„
í˜„ì¬ êµ¬í˜„ëœ ê¸ˆì§€ì–´ íŒ¨í„´ì´ ì¶©ë¶„í•œê°€ìš”?
ì¶”ê°€í•´ì•¼ í•  ë„¤ì´ë²„ ì •ì±… ìœ„ë°˜ íŒ¨í„´ì´ ìˆë‚˜ìš”?

### Q2. Phase 5 ìš°ì„ ìˆœìœ„
ë‹¤ìŒ Phase 5ì—ì„œ ìš°ì„  êµ¬í˜„í•´ì•¼ í•  ê¸°ëŠ¥ì€?
1. ìë™ ìƒí’ˆ ë“±ë¡ íŒŒì´í”„ë¼ì¸
2. ë¦¬ë·° ë¶„ì„ + ê°œì„ ì  ë„ì¶œ
3. ê²½ìŸì‚¬ ê°€ê²© ëª¨ë‹ˆí„°ë§
4. ì¬ê³  ì•Œë¦¼ ì‹œìŠ¤í…œ

### Q3. Apify Actor ì¶”ì²œ
í˜„ì¬ `ecomscrape/1688-product-details-page-scraper` ì‚¬ìš© ì¤‘.
ë” ì í•©í•œ Actorê°€ ìˆë‚˜ìš”?

### Q4. ë¹„ìš© ìµœì í™”
ì›” 1000ê±´ ìŠ¤í¬ë˜í•‘ ê¸°ì¤€, Apify ë¹„ìš© ìµœì í™” ë°©ë²•ì€?

---

## 10. ì§„í–‰ ì˜ˆì • ì‘ì—…

### ì¦‰ì‹œ (ì˜¤ëŠ˜)
- [x] Apify API ì „í™˜ ì™„ë£Œ
- [x] Pre-Flight Check êµ¬í˜„ ì™„ë£Œ
- [x] Streamlit íƒ­ UI ì—…ë°ì´íŠ¸
- [x] CLAUDE.md ì—…ë°ì´íŠ¸
- [x] Gemini ë³´ê³ ì„œ ì‘ì„±

### ë‹¨ê¸° (ì´ë²ˆ ì£¼)
- [ ] ë¡œì»¬ í™˜ê²½ì—ì„œ Apify ì‹¤ì œ í…ŒìŠ¤íŠ¸
- [ ] Pre-Flight Check íŒ¨í„´ ë³´ì™„ (Gemini í”¼ë“œë°± ë°˜ì˜)
- [ ] Phase 5 ë¡œë“œë§µ ìƒì„¸í™”

### ì¤‘ê¸° (ë‹¤ìŒ ì£¼)
- [ ] ìë™ ìƒí’ˆ ë“±ë¡ íŒŒì´í”„ë¼ì¸ ì„¤ê³„
- [ ] Streamlit â†” Supabase ì—°ë™
- [ ] ëŒ€ì‹œë³´ë“œ UX ê°œì„ 

---

## 11. ê²°ë¡ 

### v3.5 ë‹¬ì„± ì‚¬í•­
1. **1688 ìŠ¤í¬ë˜í•‘ ë¬¸ì œ í•´ê²°** - Apify APIë¡œ ì „ëµ ì „í™˜
2. **Phase 4 ì™„ë£Œ** - Pre-Flight Check ê¸ˆì§€ì–´ ê²€ì‚¬
3. **Streamlit ëŒ€ì‹œë³´ë“œ í™•ì¥** - 3ê°œ íƒ­ (ë§ˆì§„/1688/ê¸ˆì§€ì–´)
4. **ë¬¸ì„œ ì •ë¹„** - CLAUDE.md, ë³´ê³ ì„œ ì—…ë°ì´íŠ¸

### í•µì‹¬ êµí›ˆ
> "ì§ì ‘ êµ¬í˜„ vs SaaS í™œìš©"ì˜ ì˜¬ë°”ë¥¸ íŒë‹¨
> - WSL ë¸Œë¼ìš°ì € ì´ìŠˆë¡œ 3ì¼ ì†Œìš” â†’ Apify ì „í™˜ìœ¼ë¡œ 1ì‹œê°„ í•´ê²°
> - "ë‚¨ì´ ì˜ ë§Œë“  ê±° ê°€ì ¸ë‹¤ ì“°ëŠ”" ì „ëµì˜ ì¤‘ìš”ì„±

### ë‹¤ìŒ ë‹¨ê³„
Gemini í”¼ë“œë°±ì„ ë°›ê³  Phase 5 ì§„í–‰

---

*ë³´ê³ ì: Claude Code CLI*
*ê²€í†  ìš”ì²­ ëŒ€ìƒ: Gemini AI*
*GitHub: https://github.com/hyunwoooim-star/smart-store-agent*
