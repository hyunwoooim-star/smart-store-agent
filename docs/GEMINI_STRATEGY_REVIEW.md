# Smart Store Agent - 전략 검토 요청 (v3.3)

> Gemini CTO님께 - 현재 구현된 전략의 타당성 검토 부탁드립니다.

---

## 1. 현재 구현 완료 현황

### Phase 완료 상태
| Phase | 내용 | 상태 |
|-------|------|------|
| Phase 1 | 핵심 마진 계산기 | ✅ 완료 |
| Phase 2 | Streamlit 대시보드 | ✅ 완료 |
| Phase 3 | 1688 스크래핑 (Mock) | ✅ 완료 |
| Phase 4 | AI 리뷰 분석 | ✅ 완료 |
| Phase 5 | Pre-Flight Check | ✅ 완료 |
| Phase 6-1 | 엑셀 생성기 | ✅ 완료 |
| Phase 6-2 | 테스트 코드 보강 | 🔄 진행중 |
| Phase 6-3 | 경쟁사 가격 추적 | ⏳ 대기 |

---

## 2. 마진 계산 전략 검토 요청

### 2.1 현재 적용된 비용 구조

```python
# 고정비용
상품원가 = CNY × 195 (환율)
중국내배송 = 3,000원 (고정)
구매대행수수료 = (상품원가 + 중국내배송) × 10%
관부가세 = 과세가격 × 20% (간이통관)
해외배송(항공) = 청구무게 × 8,000원/kg
해외배송(해운) = max(CBM × 75,000원, 6,000원)
국내택배 = 3,500원
포장비 = 500원

# 변동비용 (판매가 기준)
네이버수수료 = 판매가 × 5.5%
쿠팡수수료 = 판매가 × 10.8%
아마존수수료 = 판매가 × 15%
반품충당금 = 판매가 × 5%
광고비 = 판매가 × 10%

# 손익분기 공식
변동비율 = 마켓수수료 + 반품충당금 + 광고비
손익분기가 = 고정비용 / (1 - 변동비율)
```

**질문 1**: 이 비용 구조가 현실적인가요? 빠뜨린 항목이 있나요?

### 2.2 위험도 판정 기준

```python
SAFE = 마진율 30% 이상     # 🟢 진입 추천
WARNING = 마진율 15~30%   # 🟡 테스트 후 결정
DANGER = 마진율 15% 미만  # 🔴 진입 금지
```

**질문 2**: 15% / 30% 기준이 적절한가요? 업계 표준이 있나요?

### 2.3 부피무게 계산

```python
부피무게 = (가로 × 세로 × 높이) / 6000  # 항공 표준
청구무게 = max(실무게, 부피무게)
```

**질문 3**: 6000 계수가 맞나요? 배대지마다 다른 경우 어떻게 처리?

---

## 3. 비즈니스 전략 검토 요청

### 3.1 "망하는 상품 필터링" 전략

**핵심 원칙**:
1. 분석 먼저, 주문 나중 (감이 아닌 데이터로 판단)
2. 🔴 DANGER는 무조건 패스 (예외 없음)
3. MOQ 50개 이상은 샘플 테스트 필수
4. 부피무게 > 실무게 × 2면 경고 표시

**질문 4**: 이 전략에 추가해야 할 레드플래그가 있나요?

### 3.2 마켓별 진입 전략

| 단계 | 전략 |
|------|------|
| 1단계 | 네이버 스마트스토어로 시작 (수수료 5.5%) |
| 2단계 | 검증된 상품만 쿠팡 확장 (수수료 10.8%) |
| 3단계 | 고마진 상품만 아마존 진출 (수수료 15%) |

**질문 5**: 이 순서가 합리적인가요? 다른 전략이 더 나을까요?

### 3.3 시즌 상품 리스크 관리

**현재 규칙**:
- 시즌 2개월 전 소량 테스트 (5~10개)
- 시즌 끝 1개월 전 발주 중단
- 재고 소진 안 되면 손절 각오

**질문 6**: 시즌 상품 재고 관리에 대한 더 좋은 전략이 있나요?

---

## 4. 기술 구현 검토 요청

### 4.1 DDD 아키텍처

```
src/
├── core/           # 설정, 환경변수
│   └── config.py
├── domain/         # 핵심 비즈니스 로직 (외부 의존성 없음)
│   ├── models.py   # 데이터 모델
│   └── logic.py    # 마진 계산기
├── adapters/       # 외부 시스템 연동
│   └── alibaba_scraper.py
├── generators/     # 출력물 생성
│   └── excel_generator.py
└── ui/             # Streamlit 대시보드
    └── app.py
```

**질문 7**: 이 구조가 DDD 원칙에 맞나요? 개선점이 있나요?

### 4.2 설정 주입 방식

```python
@dataclass
class AppConfig:
    exchange_rate: float = 195
    shipping_rate_air: int = 8000
    # ... 기타 설정

calculator = LandedCostCalculator(config=AppConfig(exchange_rate=200))
```

**질문 8**: 하드코딩 대신 설정 주입 방식이 올바른 선택인가요?

---

## 5. 다음 단계 계획

### Phase 6-2: 테스트 코드 보강
- pytest 기반 단위 테스트
- 엣지 케이스: 부피무게 10배 상황, 환율 급등 시나리오
- 통합 테스트: 스크래핑 → 계산 → 엑셀 파이프라인

### Phase 6-3: 경쟁사 가격 추적
- URL 기반 가격 모니터링 (Gemini CTO 권장 Option A)
- 가격 변동 알림
- 자동 가격 조정 제안

### Phase 7: 1688 실시간 연동
- Apify API 기반 스크래핑
- 공급업체 신뢰도 분석

**질문 9**: 우선순위가 맞나요? 더 급한 것이 있나요?

---

## 6. 피드백 요청 사항 요약

| # | 질문 | 카테고리 |
|---|------|----------|
| 1 | 비용 구조 현실성 | 마진 계산 |
| 2 | 15%/30% 기준 적절성 | 위험도 |
| 3 | 부피무게 계수 6000 검증 | 배송비 |
| 4 | 추가 레드플래그 | 전략 |
| 5 | 마켓 진입 순서 | 전략 |
| 6 | 시즌 재고 관리 | 전략 |
| 7 | DDD 아키텍처 검토 | 기술 |
| 8 | 설정 주입 방식 검토 | 기술 |
| 9 | 우선순위 검토 | 로드맵 |

---

## 7. 현재 작동하는 기능 데모

### 입력
```
상품명: 초경량 캠핑의자
1688 가격: 45 CNY
무게: 2.5 kg
크기: 80×20×15 cm
MOQ: 50개
목표 판매가: 45,000원
```

### 출력
```
총 비용: 66,969원
손익: -21,969원
마진율: -48.8%
위험도: 🔴 DANGER
손익분기가: 85,000원
30% 마진가: 122,000원
추천: 진입 금지! 최소 85,000원 이상 필요
```

---

**작성일**: 2026-01-23
**버전**: v3.3
**GitHub**: https://github.com/hyunwoooim-star/smart-store-agent
