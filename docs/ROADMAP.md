# Smart Store Agent - ì „ì²´ ë¡œë“œë§µ ê³„íšì„œ v3.2

## ğŸ“Š í˜„ì¬ ìƒíƒœ (Phase 1 ì™„ë£Œ)

**GitHub**: https://github.com/hyunwoooim-star/smart-store-agent

### ì™„ë£Œëœ ì‘ì—…
- [x] í•µì‹¬ ëª¨ë“ˆ 6ê°œ êµ¬í˜„
- [x] Supabase ì—°ë™ ì¤€ë¹„
- [x] ëª¨ë‹ˆí„°ë§/ì•Œë¦¼ ì‹œìŠ¤í…œ
- [x] CLI ì¸í„°í˜ì´ìŠ¤
- [x] GitHub ì €ì¥ì†Œ ìƒì„±
- [x] **MarginConfig ì„¤ì • ì£¼ì… ë°©ì‹ ì ìš© (v3.2)**

### Gemini ì½”ë“œ ë¦¬ë·° ê²°ê³¼ (2026-01-20)
- âœ… ë§ˆì§„ ê³„ì‚°ê¸°: ë¶€í”¼ë¬´ê²Œ, ìˆ¨ê²¨ì§„ ë¹„ìš©, BEP ë¡œì§ ì •í™•
- âœ… Gemini ë¶„ì„ê¸°: êµ¬ì¡°í™”ëœ í”„ë¡¬í”„íŠ¸, ì•ˆì „ì¥ì¹˜ ì™„ë¹„
- âœ… ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜: íŒŒì´í”„ë¼ì¸ ë§¤ë„ëŸ¬ì›€, í™•ì¥ì„± ì¢‹ìŒ

### Gemini í”¼ë“œë°± ë°˜ì˜ ì‚¬í•­
| í”¼ë“œë°± | ì ìš© ìƒíƒœ |
|--------|-----------|
| í™˜ìœ¨/ë°°ëŒ€ì§€ ìš”ê¸ˆ í•˜ë“œì½”ë”© â†’ ì„¤ì • ì£¼ì… | âœ… MarginConfig í´ë˜ìŠ¤ |
| Supabase RLS ì •ì±… ì£¼ì˜ | ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ |
| Gemini Visionìœ¼ë¡œ OCR ëŒ€ì²´ | ğŸ“‹ Phase 3 ê³„íš ë°˜ì˜ |
| Pre-Flight Check ê¸°ëŠ¥ | ğŸ“‹ Phase 4 ê³„íš ë°˜ì˜ |

---

## ğŸš€ ì „ì²´ ë¡œë“œë§µ

### Phase 1.5: í†µí•© í…ŒìŠ¤íŠ¸ ë° ì‹¤ì „ ê²€ì¦ (í˜„ì¬)
> Geminiê°€ ê¶Œì¥í•œ "ì§„ì§œ ëŒë ¤ë³´ê¸°"

#### ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] `.env` íŒŒì¼ ìƒì„± ë° API í‚¤ ì…ë ¥
- [ ] `pip install -r requirements.txt` ì‹¤í–‰
- [ ] **Supabase RLS ì •ì±… í™•ì¸** (ì¤‘ìš”!)
  - Supabase ëŒ€ì‹œë³´ë“œ â†’ Authentication â†’ Policies
  - `analyses` í…Œì´ë¸”ì— INSERT ì •ì±… í™•ì¸
  - í…ŒìŠ¤íŠ¸ ì‹œ RLS ë„ê±°ë‚˜, anon í‚¤ì— ê¶Œí•œ ë¶€ì—¬
- [ ] Mock í…ŒìŠ¤íŠ¸: `python src/main.py --demo`
- [ ] ì‹¤ì „ í…ŒìŠ¤íŠ¸: ìº í•‘ì˜ì ì‹œë‚˜ë¦¬ì˜¤
- [ ] DB ì €ì¥ í™•ì¸

#### ê²€ì¦ í¬ì¸íŠ¸
- [ ] ë¶€í”¼ë¬´ê²Œ 4.0kg ì ìš© í™•ì¸
- [ ] ë§ˆì§„ìœ¨ ìŒìˆ˜(-XX%) ì¶œë ¥ í™•ì¸
- [ ] output/ í´ë” ë¦¬í¬íŠ¸ ìƒì„± í™•ì¸
- [ ] Supabase í…Œì´ë¸” ë°ì´í„° í™•ì¸

---

### Phase 2: Streamlit ëŒ€ì‹œë³´ë“œ (1-2ì¼)
> "ë‚ ê°œë¥¼ ë‹¬ì" - ê°„í¸í•œ ì›¹ UI

#### ì„ íƒ ì´ìœ 
- ê¸°ì¡´ Python í´ë˜ìŠ¤ ê·¸ëŒ€ë¡œ import ê°€ëŠ¥
- Flutter ëŒ€ë¹„ ê°œë°œ ì†ë„ 3ë°° ì´ìƒ ë¹ ë¦„
- 1ì¸ ì‚¬ìš© ë„êµ¬ì— ìµœì 

#### í•µì‹¬ ê¸°ëŠ¥ (ìš°ì„ ìˆœìœ„ìˆœ)
1. **â­ ë³€ìˆ˜ ì„¤ì • íŒ¨ë„** (Gemini ê¶Œì¥ - ìµœìš°ì„ )
   - í™˜ìœ¨ ì…ë ¥ (ê¸°ë³¸ê°’: 190)
   - ë°°ëŒ€ì§€ ìš”ê¸ˆ ì¡°ì •
   - ê´€ì„¸ìœ¨ ìˆ˜ì •
   - ê´‘ê³ ë¹„/ë°˜í’ˆë¹„ ë¹„ìœ¨ ì¡°ì •

2. **ë§ˆì§„ ê³„ì‚°ê¸° í¼**
   - ìƒí’ˆëª…, ë„ë§¤ê°€, ë¬´ê²Œ, í¬ê¸° ì…ë ¥
   - ì‹¤ì‹œê°„ ë§ˆì§„ ê³„ì‚° ê²°ê³¼

3. **ê²°ê³¼ ì‹œê°í™”**
   - ë§ˆì§„ìœ¨ ê²Œì´ì§€ (ì /í™©/ë…¹)
   - ë¹„ìš© êµ¬ì„± íŒŒì´ì°¨íŠ¸
   - Go/No-Go íŒì •

4. **ë¶„ì„ íˆìŠ¤í† ë¦¬**
   - Supabaseì—ì„œ ê³¼ê±° ë¶„ì„ ì¡°íšŒ
   - ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ

#### ì˜ˆì‹œ ì½”ë“œ êµ¬ì¡°
```python
# app.py
import streamlit as st
from src.sourcing.margin_calculator import MarginCalculator, MarginConfig

st.title("Smart Store Agent")

# ì‚¬ì´ë“œë°”: ì„¤ì • ë³€ê²½ (Gemini ê¶Œì¥)
with st.sidebar:
    st.header("ì„¤ì •")
    exchange_rate = st.number_input("í™˜ìœ¨ (CNYâ†’KRW)", value=190)
    shipping_rate = st.number_input("ë°°ëŒ€ì§€ ìš”ê¸ˆ (ì›/kg)", value=8000)
    ad_rate = st.slider("ê´‘ê³ ë¹„ ë¹„ìœ¨", 0.0, 0.20, 0.10)

# ì»¤ìŠ¤í…€ ì„¤ì •ìœ¼ë¡œ ê³„ì‚°ê¸° ìƒì„±
config = MarginConfig(
    exchange_rate=exchange_rate,
    shipping_rate_air=shipping_rate,
    ad_cost_rate=ad_rate
)
calculator = MarginCalculator(config=config)
```

---

### Phase 3: ìë™í™” í™•ì¥ (2-3ì£¼)
> "ëˆˆì„ ë‹¬ì" - ì´ë¯¸ì§€ ê¸°ë°˜ ì†Œì‹± ìë™í™”

| ê¸°ëŠ¥ | ê¸°ìˆ  | ìš°ì„ ìˆœìœ„ | Gemini ì œì–¸ |
|------|------|----------|-------------|
| **ì´ë¯¸ì§€ ìŠ¤í™ ì¶”ì¶œ** | Gemini Pro Vision | ë†’ìŒ | OCRë³´ë‹¤ Vision ëª¨ë¸ ì¶”ì²œ |
| ê°€ê²© ëª¨ë‹ˆí„°ë§ | ìŠ¤ì¼€ì¤„ëŸ¬ + ì•Œë¦¼ | ì¤‘ê°„ | - |
| ë¦¬ë·° ìˆ˜ì§‘ ìë™í™” | ì—‘ì…€ íŒŒì‹± | ì¤‘ê°„ | - |
| í‚¤ì›Œë“œ íŠ¸ë Œë“œ | ë°ì´í„° ì‹œê°í™” | ë‚®ìŒ | - |

#### Gemini Vision í™œìš© ë°©ì•ˆ
```python
# ê¸°ì¡´ Gemini API í™œìš© (ì¶”ê°€ ë¹„ìš© ìµœì†Œí™”)
# 1688 ìƒí’ˆ ì´ë¯¸ì§€ URL â†’ Gemini Vision â†’ JSON ìŠ¤í™
prompt = "ì´ ìƒí’ˆ ì´ë¯¸ì§€ì—ì„œ ìŠ¤í™í‘œë¥¼ ì½ì–´ì„œ JSONìœ¼ë¡œ ë°˜í™˜í•´"
```

---

### Phase 4: ë¹„ì¦ˆë‹ˆìŠ¤ í™•ì¥ (4ì£¼+)
> ìˆ˜ìµí™” ë° ê³ ë„í™”

| ê¸°ëŠ¥ | ì„¤ëª… | Gemini ì œì–¸ |
|------|------|-------------|
| **Pre-Flight Check** | ë„¤ì´ë²„ ê¸ˆì§€ì–´ ê²€ì‚¬ | ë“±ë¡ ì „ í•„ìˆ˜ ê²€ì¦ |
| ë©€í‹° ìŠ¤í† ì–´ ì§€ì› | ì—¬ëŸ¬ ê³„ì • ê´€ë¦¬ | - |
| ìë™ ìƒí’ˆ ë“±ë¡ | Commerce API | ê²€ìˆ˜ ë¡œì§ ê¹Œë‹¤ë¡œì›€ ì£¼ì˜ |
| ì¬ê³  ê´€ë¦¬ | 1688 â†” ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´ | - |
| ì •ì‚° ë¦¬í¬íŠ¸ | ì›”ë³„ ìë™ ì§‘ê³„ | - |

#### Pre-Flight Check ê¸°ëŠ¥ (spec_validator.py í™•ì¥)
```python
# ë„¤ì´ë²„ ê¸ˆì§€ì–´ ëª©ë¡
FORBIDDEN_WORDS = ["ìµœì €ê°€", "1ìœ„", "íŠ¹í—ˆ", "ì˜ë£Œê¸°ê¸°", ...]

def pre_flight_check(product_title: str, description: str) -> list:
    """ë“±ë¡ ì „ ê¸ˆì§€ì–´ ê²€ì‚¬"""
    violations = []
    for word in FORBIDDEN_WORDS:
        if word in product_title or word in description:
            violations.append(f"ê¸ˆì§€ì–´ ë°œê²¬: {word}")
    return violations
```

---

## ğŸ“… ìˆ˜ì •ëœ ì¼ì •

```
Week 1: Phase 1.5 (í†µí•© í…ŒìŠ¤íŠ¸) â† í˜„ì¬
        - .env ì„¤ì •
        - Supabase RLS í™•ì¸
        - ìº í•‘ì˜ì í…ŒìŠ¤íŠ¸

Week 2: Phase 2 (Streamlit ëŒ€ì‹œë³´ë“œ)
        - ë³€ìˆ˜ ì„¤ì • íŒ¨ë„ (ìµœìš°ì„ )
        - ë§ˆì§„ ê³„ì‚° í¼
        - ê²°ê³¼ ì‹œê°í™”

Week 3-4: Phase 3 (ìë™í™”)
        - Gemini Vision ì´ë¯¸ì§€ ìŠ¤í™ ì¶”ì¶œ
        - ê°€ê²© ëª¨ë‹ˆí„°ë§

Week 5+: Phase 4 (í™•ì¥)
        - Pre-Flight Check
        - ìë™ ìƒí’ˆ ë“±ë¡
```

---

## âš¡ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì‘ì—…

### Step 1: .env íŒŒì¼ ìƒì„±
```bash
cp .env.example .env
# í¸ì§‘ê¸°ë¡œ ì—´ì–´ì„œ ì‹¤ì œ í‚¤ ì…ë ¥
```

### Step 2: ì˜ì¡´ì„± ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

### Step 3: Supabase RLS í™•ì¸ (ì¤‘ìš”!)
1. Supabase ëŒ€ì‹œë³´ë“œ ì ‘ì†
2. Table Editor â†’ analyses í…Œì´ë¸”
3. RLSê°€ ì¼œì ¸ìˆë‹¤ë©´:
   - í…ŒìŠ¤íŠ¸ìš©: RLS ë„ê¸°
   - ë˜ëŠ”: INSERT ì •ì±… ì¶”ê°€

### Step 4: í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# Mock í…ŒìŠ¤íŠ¸
python src/main.py --demo

# ì‹¤ì „ í…ŒìŠ¤íŠ¸ (ì„¤ì • ë³€ê²½ ê°€ëŠ¥!)
python src/main.py \
  --product "ì´ˆê²½ëŸ‰ ë¦´ë ‰ìŠ¤ ìº í•‘ì˜ì" \
  --category "ìº í•‘/ë ˆì €" \
  --price-cny 45 \
  --weight 2.5 \
  --dimensions "80x20x15" \
  --moq 50 \
  --target-price 45000
```

---

## ğŸ”— ë³´ê³ ì„œìš© ë§í¬

| í•­ëª© | ë§í¬ |
|------|------|
| **GitHub ì €ì¥ì†Œ** | https://github.com/hyunwoooim-star/smart-store-agent |
| **ë¡œë“œë§µ ë¬¸ì„œ** | https://github.com/hyunwoooim-star/smart-store-agent/blob/main/docs/ROADMAP.md |

---

## ğŸ“Š ìµœì¢… ë¡œë“œë§µ ìš”ì•½

```
[ì™„ë£Œ] Phase 1: í•µì‹¬ ì—”ì§„ ê°œë°œ
[ì™„ë£Œ] v3.2: MarginConfig ì„¤ì • ì£¼ì…
[í˜„ì¬] Phase 1.5: í†µí•© í…ŒìŠ¤íŠ¸ ë° ì‹¤ì „ ê²€ì¦
[ë‹¤ìŒ] Phase 2: Streamlit ëŒ€ì‹œë³´ë“œ (ë³€ìˆ˜ ì„¤ì • ìµœìš°ì„ )
[ì˜ˆì •] Phase 3: Gemini Vision ì´ë¯¸ì§€ ìë™í™”
[ì˜ˆì •] Phase 4: Pre-Flight Check + ë¹„ì¦ˆë‹ˆìŠ¤ í™•ì¥
```

---

## âœ… Gemini í”¼ë“œë°± ìš”ì•½

| í•­ëª© | ë‚´ìš© | ë°˜ì˜ |
|------|------|------|
| í™˜ìœ¨/ìš”ê¸ˆ í•˜ë“œì½”ë”© | MarginConfigë¡œ ë¶„ë¦¬ | ì™„ë£Œ |
| Supabase RLS | ì²´í¬ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ | ì™„ë£Œ |
| Streamlit ì„ íƒ | "ì‹ ì˜ í•œ ìˆ˜" í‰ê°€ | ìœ ì§€ |
| ë³€ìˆ˜ ì„¤ì • UI | Phase 2 ìµœìš°ì„  ì‘ì—… | ê³„íš |
| Gemini Vision | OCR ëŒ€ì‹  Vision í™œìš© | Phase 3 ê³„íš |
| Pre-Flight Check | ê¸ˆì§€ì–´ ê²€ì‚¬ ê¸°ëŠ¥ | Phase 4 ê³„íš |

---

*ìµœì¢… ìˆ˜ì •: 2026-01-20*
*ë²„ì „: v3.2*
*ìƒíƒœ: Phase 1 ì™„ë£Œ, Phase 1.5 ì§„í–‰ ì¤‘*
*UI ê²°ì •: Streamlit ì›¹ ëŒ€ì‹œë³´ë“œ*
*Gemini í”¼ë“œë°±: ì „ì²´ ë°˜ì˜ ì™„ë£Œ*
